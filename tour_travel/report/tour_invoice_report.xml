<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<template id="tour_invoice_report_doc">
			<t t-call="report.external_layout">
				<div class="page">
					<div class="row">
						<h2>
							<span t-if="doc.type == 'out_invoice' and (doc.state == 'open' or doc.state == 'paid')">Invoice</span>
							<span t-if="doc.type == 'out_invoice' and doc.state == 'proforma2'">PRO-FORMA</span>
							<span t-if="doc.type == 'out_invoice' and doc.state == 'draft'">Draft Invoice</span>
							<span t-if="doc.type == 'out_invoice' and doc.state == 'cancel'">Cancelled Invoice</span>
							<span t-if="doc.type == 'out_refund'">Refund</span>
							<span t-if="doc.type == 'in_refund'">Supplier Refund</span>
							<span t-if="doc.type == 'in_invoice'">Supplier Invoice</span>
							<span t-field="doc.number"/>
						</h2>
						<br/>
						<table >
							<tbody class="sale_tbody">
								<tr>
									<td width="12%" height="30">
										<strong>Customer Name:</strong>
									</td >
									<td width="10%" >
										<address t-field="doc.partner_id"
										t-field-options='{"widget": "contact", "fields": ["address", "name","email"], "no_marker": true}' />
										<span t-if="doc.partner_id.vat">
											TIN:
											<span t-field="doc.partner_id.vat"/>
										</span>
									</td >
									<td width="20%"></td>
									<td width="20%"></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div></div>
					<div class="row mt32 mb32">
						<div class="col-xs-2" t-if="doc.name">
							<strong>Description:</strong>
							<p t-field="doc.name"/>
						</div>
						<div class="col-xs-2" t-if="doc.date_invoice">
							<strong>Invoice Date:</strong>
							<p t-esc="doc.get_partner_lang_date(doc.date_invoice,doc.partner_id.lang)"/>
						</div>
						<div class="col-xs-2" t-if="doc.origin">
							<strong>Source:</strong>
							<p t-field="doc.origin"/>
						</div>
						<div class="col-xs-2" t-if="doc.partner_id.ref">
							<strong>Customer Code:</strong>
							<p t-field="doc.partner_id.ref"/>
						</div>
						<div class="col-xs-2" t-if="doc.reference">
							<strong>Reference:</strong>
							<p t-field="doc.reference"/>
						</div>
					</div>
					<br/>
					<table>
						<tbody class="sale_tbody">
							<!-- <tr t-foreach="doc.tour_id.tour_road_travel_lines" t-as="line"> -->
							<tr>
								<td width="20%" height = "30">
									<strong>Tour Name:</strong>
								</td>
								<td width="20%">
									<span t-field="doc.tour_product_id.product_id.name"/>
								</td>
								<td class="text-right" width="20%" height = "30">
									<strong>Tour Start Date:</strong>
								</td>
								<td class="text-right" width="20%">
									<p t-esc="doc.get_start_date_tour(doc.origin)"/>
								</td>
							</tr>
						</tbody>
					</table>
					<br/>
					<table class="table table-condensed">
						<thead>
							<tr>
								<th>Description</th>
								<th>Quantity</th>
								<th class="text-right">Unit Price</th>
								<th class="text-right" groups="sale.group_discount_per_so_line">Discount (%)</th>
								<th class="text-right">Taxes</th>
								<th class="text-right">Amount</th>
							</tr>
						</thead>
						<tbody class="invoice_tbody">
							<tr t-foreach="doc.invoice_line_ids" t-as="l">
								<td>
									<span t-field="l.name"/>
								</td>
								<td>
									<span t-field="l.quantity"/>
									<span t-field="l.uom_id"  groups="product.group_uom"/>
								</td>
								<td class="text-right">
									<span t-field="l.price_unit"/>
								</td>
								<td class="text-right" groups="sale.group_discount_per_so_line">
									<span t-field="l.discount"/>
								</td>
								<td class="text-right">
									<span t-esc="', '.join(map(lambda x: x.name, l.invoice_line_tax_ids))"/>
								</td>
								<td class="text-right">
									<span t-field="l.price_subtotal"
									t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
								</td>
							</tr>
						</tbody>
					</table>
					<br/>
					<div class="row">
						<div class="col-xs-4 pull-right">
							<table class="table table-condensed">
								<tr class="border-black">
									<td>
										<strong>Total Without Taxes</strong>
									</td>
									<td class="text-right">
										<span t-field="doc.amount_untaxed" t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
									</td>
								</tr>
								<tr>
									<td>Taxes</td>
									<td class="text-right">
										<span t-field="doc.amount_tax" t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
									</td>
								</tr>
								<tr class="border-black">
									<td>
										<strong>Total</strong>
									</td>
									<td class="text-right">
										<span t-field="doc.amount_total" t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<div class="row" t-if="doc.tax_line_ids">
						<div class="col-xs-6">
							<table class="table table-condensed">
								<thead>
									<tr>
										<th>Tax</th>
										<th class="text-right">Base</th>
										<th class="text-right">Amount</th>
									</tr>
								</thead>
								<tbody>
									<tr t-foreach="doc.tax_line_ids" t-as="t">
										<td>
											<span t-field="t.name"/>
										</td>
										<td class="text-right">
											<span t-field="t.base"
											t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
										</td>
										<td class="text-right">
											<span t-field="t.amount"
											t-field-options='{"widget": "monetary", "display_currency": "doc.currency_id"}'/>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<p t-if="doc.comment">
						<strong>Comment:</strong>
						<span t-field="doc.comment"/>
					</p>
					<p t-if="doc.payment_term.note">
						<strong>Payment Term:</strong>
						<span t-field="doc.payment_term.note"/>
					</p>
					<p t-if="doc.fiscal_position.note">
						<strong>Fiscal Position Remark:</strong>
						<span t-field="doc.fiscal_position.note"/>
					</p>
				</div>
			</t>
		</template>
		<template id="tour_invoice_report">
			<t t-call="report.html_container">
				<t t-foreach="docs" t-as="doc">
					<!-- <t t-raw="translate_doc(doc, doc_model, 'partner_id.lang', 'tour_travel.tour_invoice_report_doc')"/> -->
					<t t-call="tour_travel.tour_invoice_report_doc" t-lang="doc.partner_id.lang"/>
				</t>
			</t>
		</template>
	</data>
</odoo>